import{j as e,S as g,x as j}from"./app-C9yVRXOt.js";import{L as y}from"./Layout-Nq1jnATS.js";const b=({product:a,sales:d,productId:o,totalRevenue:i,totalQuantity:l,totalCommissions:c})=>{var x,m;const s=d?d.filter(t=>parseInt(t.product_id)===parseInt(o)):[];console.log("ProductSalesDetails - product:",a),console.log("ProductSalesDetails - productId:",o),console.log("ProductSalesDetails - all sales:",d),console.log("ProductSalesDetails - all sales length:",d==null?void 0:d.length),console.log("ProductSalesDetails - filtered sales:",s),console.log("ProductSalesDetails - filtered sales length:",s==null?void 0:s.length),console.log("ProductSalesDetails - totalRevenue:",i),console.log("ProductSalesDetails - totalQuantity:",l),console.log("ProductSalesDetails - totalCommissions:",c);const r=t=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t),p=t=>new Date(t).toLocaleDateString("es-MX"),n=t=>new Intl.NumberFormat("es-MX").format(t);return e.jsxs(y,{children:[e.jsx(g,{title:`Ventas de ${a.name} - Analytics`}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:["📦 Ventas de ",a.name]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Todas las ventas de este producto"})]}),e.jsx(j,{href:"/analytics",className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md transition-colors",children:"← Volver a Analytics"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Información del Producto"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nombre:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Categoría:"})," ",((x=a.category)==null?void 0:x.nombre)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Proveedor:"})," ",((m=a.provider)==null?void 0:m.name)||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Precio:"})," ",r(a.price)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Stock:"})," ",n(a.stock)]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Estadísticas de Ventas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total Vendido:"})," ",n(l)," unidades"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total Ingresos:"})," ",e.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:r(i)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total Comisiones:"})," ",e.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-semibold",children:r(c)})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Número de Ventas:"})," ",n(s.length)]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Promedios"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Precio Promedio:"})," ",r(i/l)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Cantidad por Venta:"})," ",n(s.length>0?l/s.length:0)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Comisión Promedio:"})," ",r(s.length>0?c/s.length:0)]})]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Todas las Ventas de ",a.name," (",s.length,")"]})}),e.jsx("div",{className:"overflow-x-auto rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gradient-to-r from-green-500 to-emerald-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"📅 Fecha"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"👤 Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"🏪 Vendedor"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"🎨 Color"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"📊 Cantidad"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"💰 Precio Unitario"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"💸 Comisión"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"💵 Total"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s&&s.length>0?s.map(t=>{var h;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:p(t.sale_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.client_name||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((h=t.seller)==null?void 0:h.name)||"Vendedor no encontrado"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.color||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.quantity_sold}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r(t.sale_price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-yellow-600 dark:text-yellow-400",children:r(t.commission)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:r(t.total_amount)})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay ventas registradas para este producto"})})})]})})]})]})]})};export{b as default};
