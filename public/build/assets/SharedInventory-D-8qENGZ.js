import{r as o,G as J,j as e,S as le,A as B}from"./app-B5iQsXmW.js";import{L as ne}from"./Layout-Da3D4rhq.js";function xe({inventory:i,statistics:a,products:x,users:j,currentUserId:c,filterUserId:l}){var R,z,L,I;const[H,g]=o.useState(!1),[d,b]=o.useState(null),[K,f]=o.useState(!1),[h,N]=o.useState(null),[Q,v]=o.useState(!1),[m,k]=o.useState(null),[w,W]=o.useState(()=>localStorage.getItem("shared-inventory-view-mode")||"cards"),{data:n,setData:u,post:X,processing:E,errors:q,reset:C}=J({product_id:"",partners:[{user_id:"",quantity:""}],notes:""}),{data:$,setData:S,put:Y,processing:P,errors:D,reset:T}=J({quantity:"",notes:""}),Z=r=>{r.preventDefault(),X("/shared-inventory",{onSuccess:()=>{g(!1),C(),b(null)},onError:t=>{console.error("=== ERRORES ===",t)},onFinish:()=>{}})},U=()=>{u("partners",[...n.partners,{user_id:"",quantity:""}])},ee=r=>{if(n.partners.length>1){const t=n.partners.filter((s,y)=>y!==r);u("partners",t)}},V=(r,t,s)=>{const y=[...n.partners];y[r][t]=s,u("partners",y)},re=r=>{const t=x.find(s=>s.id==r);b(t),u("product_id",r)},te=()=>(d==null?void 0:d.version)||1,ae=()=>(d==null?void 0:d.purchase_price)||0,p=r=>r?`$${parseFloat(r).toFixed(2)}`:"$0.00",A=r=>{N(r),S({quantity:r.quantity,notes:r.notes||""}),f(!0)},se=r=>{r.preventDefault(),Y(`/shared-inventory/${h.id}`,{onSuccess:()=>{f(!1),T(),N(null)},onError:t=>{console.error("Errores al editar:",t)}})},M=r=>{k(r),v(!0)},de=()=>{B.delete(`/shared-inventory/${m.id}`,{onSuccess:()=>{v(!1),k(null)},onError:r=>{console.error("Errores al eliminar:",r),alert("Error al eliminar el inventario: "+JSON.stringify(r))}})},O=r=>{var t;return(t=r==null?void 0:r.category)!=null&&t.nombre?r.category.nombre:"Sin categorÃ­a"},F=r=>{const t=r?`/shared-inventory?user_id=${r}`:"/shared-inventory";B.visit(t)},_=()=>{if(!l)return null;const r=j.find(t=>t.id==l);return r?r.name:"Usuario desconocido"},G=r=>{W(r),localStorage.setItem("shared-inventory-view-mode",r)};return e.jsxs(ne,{children:[e.jsx(le,{title:"Inventario Compartido - Vida Smart"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mr-6",children:e.jsx("span",{className:"text-white text-2xl",children:"ðŸ¤"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:["ðŸ¤ Inventario Compartido"," ",l?`- ${_()}`:"- Todos los Usuarios"]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:l?`Inventario personal de ${_()}`:"Gestiona el inventario compartido de todos los usuarios"})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx("span",{children:"+"}),"Agregar Compra Compartida"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl shadow-lg p-6 border border-blue-200 dark:border-blue-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"ðŸ“¦"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Productos en Stock"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.total_products)||0}),l&&e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["de ",a==null?void 0:a.user_name]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl shadow-lg p-6 border border-green-200 dark:border-green-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"ðŸ“Š"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Unidades"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.total_quantity)||0}),l&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["de ",a==null?void 0:a.user_name]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl shadow-lg p-6 border border-purple-200 dark:border-purple-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"ðŸ’°"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:["Valor Total"," ",l?`(${a==null?void 0:a.user_name})`:"(Todos)"]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.formatted_total_value)||"$0.00"}),l&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"inventario personal"})]})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"ðŸ‘¥"}),"Filtrar por Usuario"]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>F(null),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${l?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600":"bg-gradient-to-r from-purple-500 to-indigo-600 text-white shadow-lg"}`,children:"ðŸ‘¥ Todos los Usuarios"}),j.map(r=>e.jsxs("button",{onClick:()=>F(r.id),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${l==r.id?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[r.id==c?"ðŸ‘¤":"ðŸ‘¥"," ",r.name,r.id==c&&" (TÃš)"]},r.id))]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"ðŸ“¦"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l?`Inventario de ${_()}`:"Inventario de Todos los Usuarios"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[(i==null?void 0:i.length)||0," productos en stock",l?" personal":" compartido"]})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>G("cards"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="cards"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:"ðŸ“‹ Cards"}),e.jsx("button",{onClick:()=>G("table"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="table"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"}`,children:"ðŸ“Š Tabla"})]})})]}),i&&i.length>0?w==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(r=>{var t,s;return e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-600 overflow-hidden hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:`p-4 ${r.user_id==c?"bg-gradient-to-r from-green-500 to-emerald-600":"bg-gradient-to-r from-purple-500 to-indigo-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-white text-sm",children:r.user_id==c?"ðŸ‘¤":"ðŸ“¦"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm truncate max-w-32",children:((t=r.product)==null?void 0:t.name)||"Producto no encontrado"}),e.jsxs("p",{className:"text-white/80 text-xs",children:["V",r.version," â€¢"," ",((s=r.user)==null?void 0:s.name)||"Usuario desconocido",r.user_id==c&&" (TÃš)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-bold text-lg",children:r.quantity}),e.jsx("p",{className:"text-white/80 text-xs",children:"unidades"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-3 text-sm",children:"ðŸ·ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"CategorÃ­a"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:O(r.product)})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-3 text-sm",children:"ðŸ’°"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Precio de Compra"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p(r.purchase_price)})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-3 text-sm",children:"ðŸ’Ž"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Valor Total"}),e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:p(r.quantity*(r.purchase_price||0))})]})]}),r.notes&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-3 text-sm mt-1",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Notas"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:r.notes})]})]})]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>A(r),className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center space-x-1",children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:()=>M(r),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 flex items-center justify-center space-x-1",children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Eliminar"})]})]})})]},r.id)})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ“¦ Producto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ‘¤ Usuario"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ·ï¸ CategorÃ­a"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ“Š Cantidad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ’° Precio Compra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ðŸ’Ž Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"âš™ï¸ Acciones"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map(r=>{var t,s;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center",children:e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 text-sm",children:"ðŸ“¦"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((t=r.product)==null?void 0:t.name)||"Producto no encontrado"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["V",r.version]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[((s=r.user)==null?void 0:s.name)||"Usuario desconocido",r.user_id==c&&" (TÃš)"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:O(r.product)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:r.quantity})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:p(r.purchase_price)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:p(r.quantity*(r.purchase_price||0))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>A(r),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-3 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105 flex items-center space-x-1",children:[e.jsx("span",{children:"âœï¸"}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{onClick:()=>M(r),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1.5 rounded-lg text-xs font-semibold transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-105 flex items-center space-x-1",children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{children:"Eliminar"})]})]})})]},r.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-gray-400 text-4xl",children:"ðŸ“¦"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No hay inventario compartido registrado"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Agrega una compra compartida para comenzar a dividir productos entre usuarios"}),e.jsx("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Agregar Compra Compartida"})]})]})]}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Agregar Compra Compartida"}),e.jsx("button",{onClick:()=>{g(!1),C(),b(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("span",{className:"text-2xl",children:"Ã—"})})]}),e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Producto *"}),x&&x.length>0?e.jsxs("select",{value:n.product_id,onChange:r=>re(r.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar producto"}),x.map(r=>e.jsxs("option",{value:r.id,children:[r.name," - Disponible:"," ",r.available_for_shared||0," ","unidades"]},r.id))]}):e.jsx("div",{className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-600 rounded-md text-gray-500 dark:text-gray-400 text-center",children:"No hay productos disponibles para dividir"}),q.product_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:q.product_id})]}),d&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-3",children:"ðŸ“¦ InformaciÃ³n del Producto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"VersiÃ³n Actual"}),e.jsxs("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:["V",te()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Precio de Compra Actual"}),e.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:p(ae())})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Stock Total"}),e.jsxs("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:[d.stock," unidades"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Disponible para Dividir"}),e.jsxs("p",{className:"text-sm font-semibold text-green-800 dark:text-green-200",children:[d.available_for_shared||0," ","unidades"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Socios *"}),e.jsx("button",{type:"button",onClick:U,className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"+ Agregar Socio"})]}),n.partners.map((r,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Socio"}),e.jsxs("select",{value:r.user_id,onChange:s=>V(t,"user_id",s.target.value),className:"w-full px-2 py-1 text-sm bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Cantidad"}),e.jsx("input",{type:"number",min:"1",max:(d==null?void 0:d.available_for_shared)||(d==null?void 0:d.stock)||999,value:r.quantity,onChange:s=>V(t,"quantity",s.target.value),className:"w-full px-2 py-1 text-sm bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded text-gray-900 dark:text-white focus:outline-none focus:ring-1 focus:ring-purple-500",required:!0})]}),n.partners.length>1&&e.jsx("button",{type:"button",onClick:()=>ee(t),className:"text-red-500 hover:text-red-700 p-1",children:"ðŸ—‘ï¸"})]})]},t))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notas"}),e.jsx("textarea",{value:n.notes,onChange:r=>u("notes",r.target.value),rows:3,className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Notas sobre la compra compartida..."})]}),e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-500 mr-3 text-lg",children:"â„¹ï¸"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Â¿CÃ³mo funciona la divisiÃ³n?"}),e.jsxs("ul",{className:"text-xs text-green-700 dark:text-green-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Se toma automÃ¡ticamente la versiÃ³n actual del inventario general"}),e.jsx("li",{children:"â€¢ Se usa el precio de compra actual de esa versiÃ³n"}),e.jsx("li",{children:"â€¢ Cada socio recibirÃ¡ la cantidad especificada en su inventario personal"}),e.jsx("li",{children:"â€¢ Las ventas de cada socio se descontarÃ¡n de su inventario personal"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),C(),b(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:E||x.length===0,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:E?"Guardando...":x.length===0?"Sin productos disponibles":"Guardar"})]})]})]})})}),K&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"âœï¸ Editar Inventario"}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Producto"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[(R=h.product)==null?void 0:R.name," - V",h.version]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario: ",(z=h.user)==null?void 0:z.name]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cantidad *"}),e.jsx("input",{type:"number",min:"0",value:$.quantity,onChange:r=>S("quantity",r.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),D.quantity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:D.quantity})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notas"}),e.jsx("textarea",{value:$.notes,onChange:r=>S("notes",r.target.value),rows:3,className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Notas sobre el inventario..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{f(!1),T(),N(null)},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",disabled:P,children:P?"Guardando...":"Guardar Cambios"})]})]})]})}),Q&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"ðŸ—‘ï¸ Eliminar Inventario"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Â¿EstÃ¡s seguro de que quieres eliminar este inventario?"}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:["Producto: ",(L=m.product)==null?void 0:L.name," - V",m.version]}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Usuario: ",(I=m.user)==null?void 0:I.name]}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["Cantidad: ",m.quantity," unidades"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{v(!1),k(null)},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{onClick:de,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Eliminar"})]})]})})]})}export{xe as default};
