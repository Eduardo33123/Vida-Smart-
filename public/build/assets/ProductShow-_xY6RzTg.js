import{r as p,G as w,j as e,S as $,x as b}from"./app-D3pnflM5.js";import{L as M}from"./Layout-DR0v8Lj5.js";const R=({product:s,users:m=[]})=>{const[_,j]=p.useState(!1),[S,y]=p.useState(!1),[d,f]=p.useState("add"),{data:i,setData:l,post:C,processing:v,errors:a,reset:V}=w({product_id:s.id,quantity_sold:"1",client_name:"",color:"",seller_id:m.length>0?m[0].id.toString():"",sale_price:s.sale_price||s.price||"",commission:"0",additional_expenses:"",expenses_description:"",sale_date:new Date().toISOString().split("T")[0],notes:""}),{data:t,setData:g,post:A,processing:N,errors:o,reset:P}=w({product_id:s.id,action:"add",quantity:"",new_purchase_price:"",version:s.version||1}),q=r=>({1:"Focos Inteligentes",2:"C√°maras de Seguridad",3:"Sensores",4:"Interruptores",5:"Enchufes Inteligentes",6:"Termostatos",7:"Cerraduras",8:"Altavoces",9:"Otros"})[r]||"Sin categor√≠a",k=(r=>r===0?{text:"Sin Stock",color:"text-red-400 bg-red-900"}:r<=5?{text:"Stock Bajo",color:"text-yellow-400 bg-yellow-900"}:{text:"En Stock",color:"text-green-400 bg-green-900"})(s.stock),n=r=>r?`$${parseFloat(r).toFixed(2)}`:"$0.00",D=()=>{j(!0)},h=()=>{j(!1),V()},E=()=>{y(!0)},u=()=>{y(!1),P(),f("add")},x=r=>{f(r),g("action",r)},I=()=>{window.location.href=`/vender?product=${s.id}`},F=()=>{window.location.href="/shared-inventory"};return e.jsxs(M,{children:[e.jsx($,{title:`${s.name} - Vida Smart`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(b,{href:"/inventario",className:"text-gray-400 hover:text-white transition-colors",children:"‚Üê Volver al Inventario"}),e.jsx("div",{className:"h-6 w-px bg-gray-600"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Detalle del Producto"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(b,{href:`/products/${s.id}/edit`,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"‚úèÔ∏è Editar Producto"}),e.jsx(b,{href:"/inventario",className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"üì¶ Ver Inventario"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:e.jsxs("div",{className:"h-96 bg-gray-700 flex items-center justify-center",children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:`${s.image?"hidden":"flex"} items-center justify-center w-full h-full`,children:e.jsx("span",{className:"text-8xl text-gray-500",children:"üì¶"})})]})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"üè∑Ô∏è Informaci√≥n de Versiones"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Versi√≥n Actual"}),e.jsxs("span",{className:"text-lg font-bold text-purple-400",children:["V",s.version||1]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Versi√≥n del producto en stock"})]}),e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Precio de Compra Actual"}),e.jsx("span",{className:"text-lg font-bold text-blue-400",children:n(s.purchase_price)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Costo por unidad (V",s.version||1,")"]})]})]}),s.version_purchase_price&&s.version_purchase_price!==s.purchase_price&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-lg border border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Precio de Versi√≥n Espec√≠fico"}),e.jsx("span",{className:"text-lg font-bold text-purple-400",children:n(s.version_purchase_price)})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Precio espec√≠fico de la V",s.version||1]})]}),e.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Margen de Ganancia"}),e.jsx("span",{className:`text-lg font-bold ${parseFloat(s.price)-parseFloat(s.purchase_price)>=0?"text-green-400":"text-red-400"}`,children:n(parseFloat(s.price)-parseFloat(s.purchase_price))})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Diferencia entre precio de venta y compra"})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-900/20 rounded-lg border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-blue-400 mr-2",children:"‚ÑπÔ∏è"}),e.jsx("span",{className:"text-sm font-medium text-blue-300",children:"Informaci√≥n de Versiones"})]}),e.jsx("div",{className:"text-xs text-gray-400",children:'Las versiones te permiten manejar diferentes precios de compra para el mismo producto. Usa "Ajustar Stock" para agregar a la versi√≥n actual o crear una nueva versi√≥n.'})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-indigo-400 bg-indigo-900 px-3 py-1 rounded-full text-sm",children:q(s.category_id)}),e.jsx("span",{className:`text-sm px-3 py-1 rounded-full ${k.color}`,children:k.text})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["$",parseFloat(s.price).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Precio de venta"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Stock Disponible"}),e.jsxs("p",{className:"text-lg font-semibold text-white",children:[s.stock," unidades"]})]})}),s.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Descripci√≥n"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:s.description})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"üìä Estad√≠sticas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.stock}),e.jsx("p",{className:"text-sm text-gray-400",children:"Unidades en Stock"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",(parseFloat(s.price)*s.stock).toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Valor Total"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"‚ö° Acciones R√°pidas"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"üõí"}),"Vender Producto"]}),e.jsxs("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"üì¶"}),"Ajustar Stock"]}),e.jsxs("button",{onClick:I,className:"bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"üìä"}),"Ver Historial"]}),e.jsxs("button",{onClick:F,className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[e.jsx("span",{className:"mr-2",children:"ü§ù"}),"Inventario Compartido"]})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"‚ÑπÔ∏è Informaci√≥n Adicional"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Fecha de Creaci√≥n"}),e.jsx("p",{className:"text-white",children:new Date(s.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"√öltima Actualizaci√≥n"}),e.jsx("p",{className:"text-white",children:new Date(s.updated_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"ID del Producto"}),e.jsxs("p",{className:"text-white font-mono",children:["#",s.id]})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"üí∞"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vender Producto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.name})]})]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("span",{className:"text-2xl",children:"√ó"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Informaci√≥n del Producto"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Precio de Compra"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n(s.purchase_price)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stock Disponible"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[s.stock," unidades"]})]})]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault(),console.log("Enviando datos de venta:",i),C("/sales",{onSuccess:()=>{h(),window.location.reload()},onError:c=>{console.error("Error al crear la venta:",c),console.error("Errores de validaci√≥n:",a)}})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cantidad a Vender"}),e.jsx("input",{type:"number",min:"1",max:s.stock,value:i.quantity_sold,onChange:r=>l("quantity_sold",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),a.quantity_sold&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.quantity_sold})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Precio de Venta"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.sale_price,onChange:r=>l("sale_price",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),a.sale_price&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.sale_price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Comisi√≥n"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.commission,onChange:r=>l("commission",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"0.00"}),a.commission&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.commission})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Cliente"}),e.jsx("input",{type:"text",value:i.client_name,onChange:r=>l("client_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),a.client_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vendedor"}),e.jsxs("select",{value:i.seller_id,onChange:r=>l("seller_id",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar vendedor"}),m.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),a.seller_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.seller_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Venta"}),e.jsx("input",{type:"date",value:i.sale_date,onChange:r=>l("sale_date",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),a.sale_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.sale_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Gastos Adicionales"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:i.additional_expenses,onChange:r=>l("additional_expenses",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"0.00"}),a.additional_expenses&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.additional_expenses})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notas (Opcional)"}),e.jsx("textarea",{value:i.notes,onChange:r=>l("notes",r.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",placeholder:"Notas adicionales sobre la venta..."}),a.notes&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.notes})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:h,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Procesando...":"Realizar Venta"})]})]})]})})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white text-xl",children:"üì¶"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ajustar Stock"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.name})]})]}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("span",{className:"text-2xl",children:"√ó"})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Informaci√≥n Actual"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stock Actual"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[s.stock," unidades"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Versi√≥n Actual"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Versi√≥n ",s.version||1]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Precio de Compra Actual"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n(s.purchase_price)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Precio de Venta"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:n(s.price)})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"¬øQu√© deseas hacer?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d==="add"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-300"}`,onClick:()=>x("add"),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"radio",name:"stockAction",value:"add",checked:d==="add",onChange:()=>x("add"),className:"mr-3"}),e.jsx("span",{className:"text-lg",children:"üìà"})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Agregar a Versi√≥n Actual"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Agregar m√°s unidades a la versi√≥n ",s.version||1," ","existente"]})]}),e.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d==="new_version"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-300"}`,onClick:()=>x("new_version"),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"radio",name:"stockAction",value:"new_version",checked:d==="new_version",onChange:()=>x("new_version"),className:"mr-3"}),e.jsx("span",{className:"text-lg",children:"üÜï"})]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Crear Nueva Versi√≥n"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Crear versi√≥n"," ",(s.version||1)+1," con nuevo precio de compra"]})]})]})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault();const c={product_id:t.product_id,action:t.action,quantity:t.quantity};t.action==="new_version"&&t.new_purchase_price&&(c.new_purchase_price=t.new_purchase_price),A("/products/adjust-stock",{data:c,onSuccess:()=>{u(),window.location.reload()}})},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cantidad a Agregar"}),e.jsx("input",{type:"number",min:"1",value:t.quantity,onChange:r=>g("quantity",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),o.quantity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.quantity})]}),d==="new_version"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nuevo Precio de Compra"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:t.new_purchase_price,onChange:r=>g("new_purchase_price",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:d==="new_version"}),o.new_purchase_price&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.new_purchase_price})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Resumen del Ajuste:"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:d==="add"?e.jsxs("p",{children:["Se agregar√°n"," ",e.jsx("strong",{children:t.quantity||0})," ","unidades a la",e.jsxs("strong",{children:[" ","Versi√≥n"," ",s.version||1]}),"(precio:"," ",n(s.purchase_price),")"]}):e.jsxs("p",{children:["Se crear√° la"," ",e.jsxs("strong",{children:["Versi√≥n"," ",(s.version||1)+1]})," ","con",e.jsxs("strong",{children:[" ",t.quantity||0]})," ","unidades (precio:"," ",n(t.new_purchase_price),")"]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Procesando...":"Ajustar Stock"})]})]})]})})})]})]})};export{R as default};
